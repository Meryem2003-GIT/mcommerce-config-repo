# Fichier: microservice-produits.properties (dans le dépôt Git)

# Configurations H2
spring.jpa.show-sql=true
spring.h2.console.enabled=true
spring.datasource.sql-script-encoding=UTF-8

# Les configurations externalisées (La limite affichée dans le controller)
mes-configs.limitDeProduits=3

# Configuration Actuator CORRIGÉE (pas d'espace après les virgules)
management.endpoints.web.expose=info,health,refresh

# Configuration Eureka Client
eureka.client.serviceUrl.defaultZone=http://localhost:9102/eureka/

# Force Hibernate à ne pas toucher au schéma (ou à le créer si ce n'est pas fait)
spring.jpa.hibernate.ddl-auto=update

# Ajout crucial pour les versions récentes de Spring Boot (3.x/4.0.0)
# Cela remplace la ligne dépréciée 'spring.datasource.platform' dans les anciens TPs
spring.sql.init.mode=always

# --- RETRY CONFIGURATION --- [cite: 907]
resilience4j.retry.instances.productRetry.max-attempts=3 [cite: 909]
resilience4j.retry.instances.productRetry.wait-duration=2s [cite: 910]

# --- CIRCUIT BREAKER CONFIGURATION --- [cite: 913]
resilience4j.circuitbreaker.instances.productCircuitBreaker.sliding-window-size=5 [cite: 916]
resilience4j.circuitbreaker.instances.productCircuitBreaker.failure-rate-threshold=50 [cite: 918]
resilience4j.circuitbreaker.instances.productCircuitBreaker.wait-duration-in-open-state=10s [cite: 919]
resilience4j.circuitbreaker.instances.productCircuitBreaker.automatic-transition-from-open-to-half-open-enabled=true [cite: 921]
resilience4j.circuitbreaker.instances.productCircuitBreaker.permitted-number-of-calls-in-half-open-state=3 [cite: 922]
